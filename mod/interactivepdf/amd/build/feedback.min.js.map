{"version":3,"file":"feedback.min.js","sources":["../src/feedback.js"],"sourcesContent":["define(['jquery','core/notification','core/ajax'], function($,notification,ajax) {\n    function submit_feedback(userid, interactivepdfid, attemptid, subquestionid, feedback, feedbackcomment, formId){\n        let wsfunction = 'save_feedback';\n        let params = {\n            'interactivepdfid': interactivepdfid,\n            'userid': userid,\n            'attemptid': attemptid,\n            'subquestionid': subquestionid,\n            'feedback': feedback,\n            'feedbackcomment': feedbackcomment,\n        };\n        let request = {\n            methodname: wsfunction,\n            args: params\n        };\n\n        try {\n            ajax.call([request])[0].done(function(data) {\n                if (data.success == 1) {\n                    $('#'+formId).addClass('d-none');\n                    notification.addNotification({\n                        message: 'Feedback saved',\n                        type: 'success'\n                    });\n\n                } else {\n\n                }\n            });\n        } catch (e) {\n        }\n    }\n\n\n    return {\n        init: function(userid, interactivepdfid, attemptid) {\n            $(document).ready(function() {\n                $('.redio-btn').on('change', function() {\n                    if ($(this).is(':checked')) {\n                        event.preventDefault();\n                        var quizid = $(this).data('id');\n                        var value = $(this).val();\n                        var quiztype = $(this).data('quiztype');\n                        submit_feedback(userid,interactivepdfid,attemptid,quizid,quiztype,value);\n                    }\n                });\n\n                $(\".feedback-submit-btn\").on(\"click\", function(event) {\n                    event.preventDefault();\n                    var formId = $(this).closest('form').attr('id'); // Retrieve the dynamic form ID\n                    const form = event.target.closest('#'+formId);\n                    const formData = new FormData(form);\n                    var feedback = 0;\n                    for (const entry of formData) {\n                       if(entry[0] == 'subquestionid') {\n                        var subquestionid =  entry[1];\n                       }\n                        if(entry[0] == 'subquestion-feedback') {\n                            var feedback =  entry[1];\n                        }\n                        if(entry[0] == 'feedbackcomment') {\n                            var feedbackcomment =  entry[1];\n                        }\n                    }\n                    submit_feedback(userid, interactivepdfid, attemptid, subquestionid, feedback, feedbackcomment, formId);\n                });\n            });\n        }\n\n    };\n});\n"],"names":["define","$","notification","ajax","submit_feedback","userid","interactivepdfid","attemptid","subquestionid","feedback","feedbackcomment","formId","request","methodname","args","call","done","data","success","addClass","addNotification","message","type","e","init","document","ready","on","this","is","event","preventDefault","quizid","value","val","quiztype","closest","attr","form","target","formData","FormData","entry"],"mappings":"AAAAA,qCAAO,CAAC,SAAS,oBAAoB,cAAc,SAASC,EAAEC,aAAaC,eAC9DC,gBAAgBC,OAAQC,iBAAkBC,UAAWC,cAAeC,SAAUC,gBAAiBC,YAUhGC,QAAU,CACVC,WAVa,gBAWbC,KAVS,kBACWR,wBACVD,iBACGE,wBACIC,uBACLC,yBACOC,sBAQnBP,KAAKY,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MACd,GAAhBA,KAAKC,UACLjB,EAAE,IAAIU,QAAQQ,SAAS,UACvBjB,aAAakB,gBAAgB,CACzBC,QAAS,iBACTC,KAAM,gBAOpB,MAAOC,WAKN,CACHC,KAAM,SAASnB,OAAQC,iBAAkBC,WACrCN,EAAEwB,UAAUC,OAAM,WACdzB,EAAE,cAAc0B,GAAG,UAAU,cACrB1B,EAAE2B,MAAMC,GAAG,YAAa,CACxBC,MAAMC,qBACFC,OAAS/B,EAAE2B,MAAMX,KAAK,MACtBgB,MAAQhC,EAAE2B,MAAMM,MAChBC,SAAWlC,EAAE2B,MAAMX,KAAK,YAC5Bb,gBAAgBC,OAAOC,iBAAiBC,UAAUyB,OAAOG,SAASF,WAI1EhC,EAAE,wBAAwB0B,GAAG,SAAS,SAASG,OAC3CA,MAAMC,qBACFpB,OAASV,EAAE2B,MAAMQ,QAAQ,QAAQC,KAAK,YACpCC,KAAOR,MAAMS,OAAOH,QAAQ,IAAIzB,QAChC6B,SAAW,IAAIC,SAASH,UAC1B7B,SAAW,MACV,MAAMiC,SAASF,SAAU,IACZ,iBAAZE,MAAM,OACJlC,cAAiBkC,MAAM,MAEZ,wBAAZA,MAAM,GACDjC,SAAYiC,MAAM,MAEX,mBAAZA,MAAM,OACDhC,gBAAmBgC,MAAM,GAGrCtC,gBAAgBC,OAAQC,iBAAkBC,UAAWC,cAAeC,SAAUC,gBAAiBC"}