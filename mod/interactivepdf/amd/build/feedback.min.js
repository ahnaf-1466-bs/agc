define("mod_interactivepdf/feedback",["jquery","core/notification","core/ajax"],(function($,notification,ajax){function submit_feedback(userid,interactivepdfid,attemptid,subquestionid,feedback,feedbackcomment,formId){let request={methodname:"save_feedback",args:{interactivepdfid:interactivepdfid,userid:userid,attemptid:attemptid,subquestionid:subquestionid,feedback:feedback,feedbackcomment:feedbackcomment}};try{ajax.call([request])[0].done((function(data){1==data.success&&($("#"+formId).addClass("d-none"),notification.addNotification({message:"Feedback saved",type:"success"}))}))}catch(e){}}return{init:function(userid,interactivepdfid,attemptid){$(document).ready((function(){$(".redio-btn").on("change",(function(){if($(this).is(":checked")){event.preventDefault();var quizid=$(this).data("id"),value=$(this).val(),quiztype=$(this).data("quiztype");submit_feedback(userid,interactivepdfid,attemptid,quizid,quiztype,value)}})),$(".feedback-submit-btn").on("click",(function(event){event.preventDefault();var formId=$(this).closest("form").attr("id");const form=event.target.closest("#"+formId),formData=new FormData(form);var feedback=0;for(const entry of formData){if("subquestionid"==entry[0])var subquestionid=entry[1];if("subquestion-feedback"==entry[0])feedback=entry[1];if("feedbackcomment"==entry[0])var feedbackcomment=entry[1]}submit_feedback(userid,interactivepdfid,attemptid,subquestionid,feedback,feedbackcomment,formId)}))}))}}}));

//# sourceMappingURL=feedback.min.js.map