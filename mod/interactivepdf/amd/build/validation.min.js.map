{"version":3,"file":"validation.min.js","sources":["../src/validation.js"],"sourcesContent":["define(['jquery','core/notification','core/ajax'], function($,notification,ajax) {\n    /**\n     *\n     * @param userid\n     * @param quiz_id\n     * @param interactivepdfid\n     * @param attemptid\n     * @param answer\n     * @param quiz_type\n     */\n    function submit_form(userid,quiz_id,interactivepdfid,attemptid,answer,quiz_type,quiz_3nid = null,ansid=null){\n\n        if (quiz_type == 'shortques') {\n            let wsfunction = 'save_question_answer';\n            let params = {\n                'user_id': userid,\n                'quiz_id': quiz_id,\n                'interactivepdfid': interactivepdfid,\n                'attemptid': attemptid,\n                'answer': answer,\n                'quiz_type': quiz_type,\n            };\n            let request = {\n                methodname: wsfunction,\n                args: params\n            };\n\n            try {\n                ajax.call([request])[0].done(function(data) {\n                    if (data.success == 1) {\n\n                    } else {\n\n                    }\n                });\n            } catch (e) {\n            }\n        }\n        else if(quiz_type == '3nques'){\n            let wsfunction = 'save_3n_question_answer';\n            let params = {\n                'user_id': userid,\n                'quiz_id': quiz_id,\n                'interactivepdfid': interactivepdfid,\n                'attemptid': attemptid,\n                'answer': answer,\n                'quiz_type': quiz_type,\n                'ansid': ansid,\n                'quiz_3nid': quiz_3nid,\n            };\n            let request = {\n                methodname: wsfunction,\n                args: params\n            };\n\n            try {\n                ajax.call([request])[0].done(function(data) {\n                    if (data.success == 1) {\n\n                    } else {\n\n                    }\n                });\n            } catch (e) {\n            }\n        }\n        else if(quiz_type == '2nm'){\n            let wsfunction = 'save_2nm_question_answer';\n            let params = {\n                'user_id': userid,\n                'quiz_id': quiz_id,\n                'interactivepdfid': interactivepdfid,\n                'attemptid': attemptid,\n                'answer': answer,\n                'quiz_type': quiz_type,\n                'ansid': ansid,\n                'quiz_3nid': quiz_3nid,\n            };\n            let request = {\n                methodname: wsfunction,\n                args: params\n            };\n\n            try {\n                ajax.call([request])[0].done(function(data) {\n                    if (data.success == 1) {\n\n                    } else {\n\n                    }\n                });\n            } catch (e) {\n            }\n        }\n        else if(quiz_type == '2ns'){\n            let wsfunction = 'save_2ns_question_answer';\n            let params = {\n                'user_id': userid,\n                'quiz_id': quiz_id,\n                'interactivepdfid': interactivepdfid,\n                'attemptid': attemptid,\n                'answer': answer,\n                'quiz_type': quiz_type,\n                'ansid': ansid,\n                'quiz_3nid': quiz_3nid,\n            };\n            let request = {\n                methodname: wsfunction,\n                args: params\n            };\n\n            try {\n                ajax.call([request])[0].done(function(data) {\n                    if (data.success == 1) {\n\n                    } else {\n\n                    }\n                });\n            } catch (e) {\n            }\n        }\n\n    }\n    function finish_attempt(userid,interactivepdfid,attemptid){\n\n        let wsfunction = 'finish_attempt';\n        let params = {\n            'user_id': userid,\n            'interactivepdfid': interactivepdfid,\n            'attemptid': attemptid,\n        };\n        let request = {\n            methodname: wsfunction,\n            args: params\n        };\n\n        try {\n            ajax.call([request])[0].done(function(data) {\n                if (data.success == 1) {\n                    //\n                    // // Add the message to the notification system\n                    send_notification(userid,interactivepdfid,attemptid);\n                    location.reload();\n                } else {\n\n                }\n            });\n        } catch (e) {\n        }\n    }\n\n    function send_notification(userid,interactivepdfid,attemptid){\n\n        let wsfunction = 'send_notification';\n        let params = {\n            'user_id': userid,\n            'interactivepdfid': interactivepdfid,\n            'attemptid': attemptid,\n        };\n        let request = {\n            methodname: wsfunction,\n            args: params\n        };\n\n        try {\n            ajax.call([request])[0].done(function(data) {\n                if (data.success == 1) {\n\n                } else {\n\n                }\n            });\n        } catch (e) {\n        }\n    }\n\n    return {\n        init: function(userid, interactivepdfid,attemptid) {\n            attemptid = parseInt(attemptid);\n            $(document).ready(function() {\n\n                $(\"#attempt-submit-btn\").on(\"click\", function(event) {\n                    event.preventDefault();\n                    var formId = $(this).closest('form').attr('id'); // Retrieve the dynamic form ID\n\n                    const form = event.target.closest('#'+formId);\n                    const formData = new FormData(form);\n\n                    // Loop through form data\n                    for (const entry of formData) {\n                        var quiz_id = $(('#'+entry[0])).attr(\"data-id\");\n                        var quiz_type = $(('#'+entry[0])).attr(\"data-type\");\n                        var quiz_3nid = null;\n                        var ansid = null;\n                        if (quiz_type == '3nques' || quiz_type == '2nm' || quiz_type == '2ns'){\n                            quiz_3nid = $(('#'+entry[0])).attr(\"data-qid\");\n                            ansid = $(('#'+entry[0])).attr(\"data-ansid\");\n                        }\n                        var answer= '';\n                        answer = entry[1];\n                        submit_form(userid,quiz_id,interactivepdfid,attemptid,answer,quiz_type,quiz_3nid,ansid);\n                    }\n\n                    finish_attempt(userid,interactivepdfid,attemptid);\n                    return false;\n                });\n\n                $(\".question-submit-btn\").on(\"click\", function(event) {\n                    event.preventDefault();\n                    var formId = $(this).closest('div').attr('id'); // Retrieve the dynamic form ID\n                    var quiz_id = $(('#'+formId)).attr(\"data-id\");\n                    var quiz_type = $(('#'+formId)).attr(\"data-type\");\n                    var answer = $('textarea[name=\"'+quiz_type+'-'+quiz_id+'\"]').val();\n\n                    submit_form(userid,quiz_id,interactivepdfid,attemptid,answer,quiz_type);\n\n                    return false;\n                });\n            });\n        }\n\n    };\n});\n"],"names":["define","$","notification","ajax","submit_form","userid","quiz_id","interactivepdfid","attemptid","answer","quiz_type","quiz_3nid","ansid","request","methodname","args","call","done","data","success","e","finish_attempt","send_notification","location","reload","init","parseInt","document","ready","on","event","preventDefault","formId","this","closest","attr","form","target","formData","FormData","entry","val"],"mappings":"AAAAA,uCAAO,CAAC,SAAS,oBAAoB,cAAc,SAASC,EAAEC,aAAaC,eAU9DC,YAAYC,OAAOC,QAAQC,iBAAiBC,UAAUC,OAAOC,eAAUC,iEAAY,KAAKC,6DAAM,QAElF,aAAbF,UAA0B,KAUtBG,QAAU,CACVC,WAVa,uBAWbC,KAVS,SACEV,eACAC,yBACSC,2BACPC,iBACHC,iBACGC,gBAQbP,KAAKa,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,WAMf,MAAOC,UAGR,GAAgB,UAAbV,UAAsB,KAYtBG,QAAU,CACVC,WAZa,0BAabC,KAZS,SACEV,eACAC,yBACSC,2BACPC,iBACHC,iBACGC,gBACJE,gBACID,gBAQbR,KAAKa,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,WAMf,MAAOC,UAGR,GAAgB,OAAbV,UAAmB,KAYnBG,QAAU,CACVC,WAZa,2BAabC,KAZS,SACEV,eACAC,yBACSC,2BACPC,iBACHC,iBACGC,gBACJE,gBACID,gBAQbR,KAAKa,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,WAMf,MAAOC,UAGR,GAAgB,OAAbV,UAAmB,KAYnBG,QAAU,CACVC,WAZa,2BAabC,KAZS,SACEV,eACAC,yBACSC,2BACPC,iBACHC,iBACGC,gBACJE,gBACID,gBAQbR,KAAKa,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,WAMf,MAAOC,eAKRC,eAAehB,OAAOE,iBAAiBC,eAQxCK,QAAU,CACVC,WAPa,iBAQbC,KAPS,SACEV,wBACSE,2BACPC,gBAQbL,KAAKa,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MACd,GAAhBA,KAAKC,oBAaMd,OAAOE,iBAAiBC,eAQ3CK,QAAU,CACVC,WAPa,oBAQbC,KAPS,SACEV,wBACSE,2BACPC,gBAQbL,KAAKa,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,WAMf,MAAOC,KA/BGE,CAAkBjB,OAAOE,iBAAiBC,WAC1Ce,SAASC,aAKnB,MAAOJ,WA6BN,CACHK,KAAM,SAASpB,OAAQE,iBAAiBC,WACpCA,UAAYkB,SAASlB,WACrBP,EAAE0B,UAAUC,OAAM,WAEd3B,EAAE,uBAAuB4B,GAAG,SAAS,SAASC,OAC1CA,MAAMC,qBACFC,OAAS/B,EAAEgC,MAAMC,QAAQ,QAAQC,KAAK,YAEpCC,KAAON,MAAMO,OAAOH,QAAQ,IAAIF,QAChCM,SAAW,IAAIC,SAASH,UAGzB,MAAMI,SAASF,SAAU,KACtBhC,QAAUL,EAAG,IAAIuC,MAAM,IAAKL,KAAK,WACjCzB,UAAYT,EAAG,IAAIuC,MAAM,IAAKL,KAAK,aACnCxB,UAAY,KACZC,MAAQ,KACK,UAAbF,WAAsC,OAAbA,WAAmC,OAAbA,YAC/CC,UAAYV,EAAG,IAAIuC,MAAM,IAAKL,KAAK,YACnCvB,MAAQX,EAAG,IAAIuC,MAAM,IAAKL,KAAK,mBAE/B1B,OACJA,OAAS+B,MAAM,GACfpC,YAAYC,OAAOC,QAAQC,iBAAiBC,UAAUC,OAAOC,UAAUC,UAAUC,cAGrFS,eAAehB,OAAOE,iBAAiBC,YAChC,KAGXP,EAAE,wBAAwB4B,GAAG,SAAS,SAASC,OAC3CA,MAAMC,qBACFC,OAAS/B,EAAEgC,MAAMC,QAAQ,OAAOC,KAAK,MACrC7B,QAAUL,EAAG,IAAI+B,QAASG,KAAK,WAC/BzB,UAAYT,EAAG,IAAI+B,QAASG,KAAK,aACjC1B,OAASR,EAAE,kBAAkBS,UAAU,IAAIJ,QAAQ,MAAMmC,aAE7DrC,YAAYC,OAAOC,QAAQC,iBAAiBC,UAAUC,OAAOC,YAEtD"}