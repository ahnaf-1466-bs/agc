/**
 *
 * @package   theme_mb2nl
 * @copyright 2017 - 2022 Mariusz Boloz (https://mb2themes.com)
 * @license   Commercial https://themeforest.net/licenses
*/ define(["jquery","core/modal_events"],function(t,e){var a=function(e){var a=e.keyCode?e.keyCode:e.which,s='a,button,[type="submit"],input,textarea,.nav-link';t(""+s).focus(function(){"true"!==t("body").attr("data-keydown")||t("body").hasClass("pagelayout-mb2builder")||9!=a||t(this).addClass("themefocused"),t("body").attr("data-keydown","false")}),t(""+s).focusout(function(){t(this).removeClass("themefocused")})},s=function(e){var a=t('.acsb-button[data-id="'+e+'"]');if(!a.hasClass("active"))return null;a.removeClass("active"),t("html").removeClass("acsb_"+e),"readingmask"===e&&t(".acsb_mask").remove(),("contrastdark"===e||"contrastlight"===e)&&f(),"readingguide"===e&&t(".acsb_readinguide-el").remove(),M.util.set_user_preference("acsb_"+e,0)},n=function(e){t('.acsb-button[data-id="'+e+'"]').addClass("active"),t("html").addClass("acsb_"+e),"readingmask"===e&&i(),"readingguide"===e&&o(),M.util.set_user_preference("acsb_"+e,1);var a=t('.acsb-button[data-id="'+e+'"]').attr("data-disable").split(",");if(a.length)for(var n=0;n<a.length;n++)s(a[n]);("contrastdark"===e||"contrastlight"===e)&&h()},i=function(){var e="";c(),e+='<div class="acsb_mask acsb_masktop"></div>',e+='<div class="acsb_mask acsb_maskbottom"></div>',t("body").append(e)},o=function(){var e="";r(),e+='<div class="acsb_readinguide-el"></div>',t("body").append(e)},c=function(){var e=t(window);e.mousemove(function(a){t(".acsb_masktop").css("height",a.clientY-60),t(".acsb_maskbottom").css("height",e.height()-a.clientY-60)})},r=function(){t(window).mousemove(function(e){t(".acsb_readinguide-el").css("top",e.clientY+3),t(".acsb_readinguide-el").css("left",e.clientX-400)})},l=function(){t(".acsb-reset").click(function(){m(),t(".acsb-button").each(function(){s(t(this).attr("data-id"))})})},m=function(){t(".acsb-profile-item").each(function(){var e=t(this),a=e.attr("data-acsb").split(",");if(!e.hasClass("active"))return null;for(var n=0;n<a.length;n++)s(a[n]);e.removeClass("active"),M.util.set_user_preference("acsb_"+e.attr("data-id"),0)})},b=function(){var e=0;return t(".acsb-button").each(function(){t(this).hasClass("active")&&(e=1)}),e},d=function(){t(".acsb-block").removeClass("visible");var e=t(".acsb-trigger");b()&&!e.hasClass("active")?(e.addClass("active"),M.util.set_user_preference("acsb_trigger",1)):!b()&&e.hasClass("active")&&(e.removeClass("active"),M.util.set_user_preference("acsb_trigger",0),m())},u=function(t,e){for(var a=t,i=a.attr("data-acsb").split(","),o=0,c=0;c<i.length;c++)e?n(i[c]):s(i[c]);e?a.addClass("active"):a.removeClass("active"),e&&(o=1),M.util.set_user_preference("acsb_"+a.attr("data-id"),o)},h=function(){var e=v();t(e.join()).addClass("mb2scsb-contrast")},f=function(){t(".mb2scsb-contrast").removeClass("mb2scsb-contrast")},v=function(){var e=["h1","h2","h3","h4","h5","h6",".h1",".h2",".h3",".h4",".h5",".h6","#main-header",".top-bar",".master-header-inner",".breadcrumb-item",".breadcrumb-item a","#region-main","#page-a","#page-b",".page-breadcrumb","#page-header",".theme-footer",".mb2-pb-date",".headingtext",".theme-text-text",".text",".text-muted","pre","td","th","tr","th a","td a",".theme-table-wrap",".icon","label",".text-truncate",".bg-light",".page-link","dt","dd",".badge",".box-title",".box-title-text",".box-desc",".theme-boxicon-icon",".theme-boxicon-icon i",".boxcontent-desc",".box-desc-text",".theme-header-subtitle",".iconel i",".list-text",".theme-list li",".theme-list a",".nav-link",".tab-pane active",".tab-pane active *",".theme-slide-title",".theme-slider-desc",".select-items-container",".mb2-pb-select_item",".mb2-pb-btn","#page button",".btn","#page button i",".btn i",".mb2-pb-btn i",".linkbtn",".fixed-bar button",".embed-video-bg i",".card",".card-body",".quicklinks-list",".item-link",".static-icon",".static-icon i",".menu-extracontent-content",".quicklinks path",".mb2mm-action",".mb2mm-mega-action",".mb2mm-heading",".mb2mm-icon",".mb2mm-label",".mb2mm-sublabel",".mb2mm-mega-action",".mb2mm-toggle",".mb2mm-arrow",".link-replace",".mobile-navto",".mobile-navbottom",".menu-extracontent-controls",".menu-extra-controls-btn",".menu-extracontent-controls path",".admin-region",".theme-links a",".modal-content",".mb2tmpl-acccontent>div",".align-items-center",".mb2megamenu-item-header",".mb2megamenu-item-header .item-label",".mb2megamenu-builder-footer","input","textarea","select",".form-label",".form-control",".col-form-label *",".dropdown-menu",".dropdown-item",".usermenu",".footer-tools",".footer-tools a",".footer-content",".social-list",".alert",".modal-header",".modal-footer",".box",".boxlist a",".boxlist span",".activityiconcontainer.content",".card-footer",".activityname",".activityname a",".instructor-meta *",".course-link-item a",".course-link-item path",".toggle-icon",".progress-value",".theme-turnediting",".course-nav-list-item-list-container",".course-nav-list-ccontent",".activity",".theme-course-teacher-inner",".info-courses",".info-students",".teacher-info i",".theme-courses-topbar","#fsmod-header",".fsmod-course-sections",".coursetoc-section-tite",".fsmod-section-tools",".fsmod-section",".fsmod-course-content",".coursenav-link",".fsmod-backlink",".fsmod-showhide-sidebar path",".coursenav-link span",".sidebar-inner",".course-slogan",".course-categories-tree",".course-meta1",".course-meta2",".price",".enrol-course-nav ul",".comment-link",".message-app",".drawer-top",".drawer-top a",".drawer-top i",".list-group-item",".bg-white",".popover-region-container",".popover-region-footer-container",".popover-region-seeall-text"];return t("html").hasClass("acsb_contrastdark")?e.concat([".mb2-pb-row.light .mb2-pb-row-inner",]):t("html").hasClass("acsb_contrastlight")?e.concat([".mb2-pb-row.dark .mb2-pb-row-inner",]):void 0};return{focusClass:function(){t(window).keydown(function(e){t("body").attr("data-keydown","true"),a(e)})},acsbTools:function(){t(".acsb-trigger").click(function(){var e=t(".acsb-block");e.hasClass("visible")||e.addClass("visible")}),t(".acsb-block-close").click(function(){d()}),t("body").on("click",function(e){var a=t(e.target);a.closest(".acsb-block").length||a.closest(".acsb-trigger").length||d()}),t(".acsb-profile-item").each(function(){t(this).click(function(){t(this).hasClass("active")?u(t(this),0):(m(),u(t(this),1))})}),t(".acsb-button").each(function(){var e=t(this).attr("data-id");t(this).click(function(){t(this).hasClass("active")?s(e):n(e)})}),t("html").hasClass("acsb_readingmask")&&i(),t("html").hasClass("acsb_readingguide")&&o(),(t("html").hasClass("acsb_contrastdark")||t("html").hasClass("acsb_contrastlight"))&&(h(),t(document).on(e.shown,".modal",function(){t(document).ajaxComplete(function(){setTimeout(function(){h()},600)})})),l()}}});